
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Materia Prima</title>
    <link rel="stylesheet" href="/Pagina Web/CSS/Formularios.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
    <script rel="stylesheet" src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
    <header id="header-admin"></header>

    <div class="main">
        <div class="card">
            <h1> INGRESO MATERIA PRIMA </h1>

        <form>
            <div class="form-group">
                    <input type="text" name="Id" id="" required placeholder="Id del producto">
                <select name="Ubicacion" id="" required>
                                <option value="">Ubicacion de material</option>
                                <option value="Bodega">En Bodega</option>
                                <option value="Nuevo">Nuevo</option>
                            </select>
                <input type="text" name="Fecha_ingreso" ="fecha" placeholder="Fecha de ingreso"
                            onfocus="this.type='date'"  
                            onblur="if(!this.value) this.type='text'">
            </div>

                <div class="form-group">
                    <select name="Categoria" id="Cat"  placeholder="Categoria">
                    <option value="">Categoria</option>
                    <option value="Hilo">Hilo</option>
                    <option value="Guata">Guata</option>
                    <option value="Tela">Tela</option>
                    <option value="Insumos">Insumos</option>
                </select>
                    <div class="login__box-input" id="campoMaterial">
                        <input type="text" name="material" id="material" required placeholder="Nombre del material">
                    </div>
                    <div class="login__box-input" id="campoInsumos">
                        <input type="text" name="Insumos" id="material" required placeholder="Descripción de los insumos">
                    </div>
                </div>

                <div class="form-group">
                    <input type="text" name="Color" id="Color" required placeholder="Color">
                    <select name="UniMed" id="" required>
                    <option value="">Unidad de medida</option>
                    <option value="Metros">Metros</option>
                    <option value="Kilos">Kilos</option>
                    <option value="Unidad">Unidad</option>
                </select>
                </div>


                <div class="form-group">
                    <input type="number" name="Cant" id="Cantidad" required placeholder="Cantidad">
                    <input type="text" name="Precio" id="Precio" placeholder="Precio unitario">
                </div>
                

                    <div class="form-group">
                        <select name="Destino" id="" required>
                    <option value="">Destino</option>
                    <option value="Taller">Bodega</option>
                    <option value="Bordado">Corte</option>
                    <option value="Estampado">Estampado</option>
                </select>
                    </div>

                <button type="submit" class="save-btn">Registrar</button>

            <div class="form-group"></div>
                <label for="total">Total:</label>
                <input type="text" id="total" readonly>
            </div>
        </form>
    <table>
    <thead>
        <tr>
        <th>Código</th>
        <th>Nombre</th>
        <th>Descripcion</th>
        <th>Categoria</th>
        <th>Unidad de medida</th>
        <th>Estado</th>
        <th>Identificador</th>
        <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        <?php foreach ($datos as $row) { ?>
        <tr>
            <td><?php echo $row['Id']; ?></td>
            <td><?php echo $row['Ubicacion']; ?></td>
            <td><?php echo $row['Fecha_ingreso']; ?></td>
            <td><?php echo $row['Categoria']; ?></td>
            <td><?php echo $row['material']; ?></td>
            <td><?php echo $row['Insumos']; ?></td>
            <td><?php echo $row['Color']; ?></td>
            <td><?php echo $row['Cant']; ?></td>
            <td><?php echo $row['Precio']; ?></td>
            <td><?php echo $row['Destino']; ?></td>
            <td><?php echo $row['id_produccion_fk_producto_terminado']; ?></td>
            <td>
            <a class="btn-accion" href="EDITAR_PRODUCTOT.php?id_producto_t=<?php echo $row['id_producto_t']; ?>">Actualizar</a>
            <a class="btn-accion" href="ELIMINAR_PRODUCTOT.php?id_producto_t=<?php echo $row['id_producto_t']; ?>">Eliminar</a>
            </td>
        </tr>
        <?php } ?>
    </tbody>
    </table> 
    </div>

    <script>
    const select = document.getElementById("Cat");

    select.addEventListener("change", () => {
      // Ocultar todos los campos
    document.getElementById("campoMaterial").classList.add("hidden");
    document.getElementById("campoInsumos").classList.add("hidden");

      // Mostrar según lo seleccionado
    const seleccionados = Array.from(select.selectedOptions).map(opt => opt.value);
    
    if (seleccionados.includes("Tela")) {
        document.getElementById("campoMaterial").classList.remove("hidden");
    }
    if (seleccionados.includes("Insumos")) {
        document.getElementById("campoInsumos").classList.remove("hidden");
    }
    });

    const cantidad = document.getElementById("Cantidad");
    const precio = document.getElementById("Precio");
    const total = document.getElementById("total");

    function calcularTotal() {
    const cant = parseFloat(cantidad.value) || 0;
    const prec = parseFloat(precio.value) || 0;
      total.value = (cant * prec).toFixed(2); // 2 decimales
    }

    
    cantidad.addEventListener("input", calcularTotal);
    precio.addEventListener("input", calcularTotal);
</script>

</body>
</html>
<?php
require_once 'MateriaPrimap.php'; 
?>


